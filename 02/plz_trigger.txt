CREATE OR REPLACE TRIGGER PLZ_CHECK
BEFORE INSERT OR UPDATE ON Kunden FOR EACH ROW 
declare 
    ort_verz   varchar;
	plz_verz   varchar;
BEGIN
    select Ort into ort_verz from PLZ_Verzeichnis WHERE PLZ=:new.plz;
    select PLZ into plz_verz from PLZ_Verzeichnis WHERE Ort=:new.Ort;
	IF(ort_verz != :new.Ort OR plz_verz != :new.PLZs)
	THEN
		RAISE_APPLICATION_ERROR( -20001, 'PLZ und Ort passen nicht zusammen' );
	END IF;
END;